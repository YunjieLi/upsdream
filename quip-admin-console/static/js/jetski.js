
let Jetski = {
    onLoads: [],
    auto_refresh: false,
    last_updated: 0,
    layouts: {
    "app-tile-bar": "<div class=\"app-tile slds-col slds-small-size_1-of-2 slds-large-size_1-of-4 slds-m-vertical_x-small {{if hide}} slds-hide {{end hide}}\">\n    <div class=\"slds-box\">\n        <div class=\"slds-text-body_regular slds-text-color_weak slds-m-bottom_xx-small\">$label</div>\n        <div class=\"slds-text-heading_small slds-m-bottom_medium\">$title</div>\n        <div class=\"slds-text-body-regular slds-text-color_weak\">\n            In\n            <span class=\"count slds-text-heading_medium slds-text-color_default\">$count</span>\n            documents\n        </div>\n        <div class=\"custom-bar-container $type slds-m-top_medium\">\n            <div class=\"custom-bar-content\">\n            </div>\n        </div>\n    </div>\n</div>",
    "app-tile-pie": "<div class=\"app-tile slds-col slds-small-size_1-of-2 slds-large-size_1-of-4 slds-m-vertical_x-small {{if hide}} slds-hide {{end hide}}\">\n    <div class=\"slds-box\">\n        <div class=\"pie-container-container slds-m-bottom_medium\">\n            <div class=\"pie-container\">\n                <canvas class=\"pie\"></canvas>\n            </div>\n        </div>\n        <div class=\"slds-text-body_regular slds-text-color_weak slds-m-bottom_xx-small\">$label</div>\n        <div class=\"slds-text-heading_small slds-m-bottom_medium\">$title</div>\n        <div class=\"slds-text-heading_small slds-text-color_weak\">\n            In\n            <span class=\"slds-text-heading_medium slds-text-color_default\">$count</span>\n            documents\n        </div>\n    </div>\n</div>",
    "base": "<header class=\"slds-global-header_container\">\n    <div class=\"slds-global-header slds-grid slds-grid_align-spread\">\n    </div>\n</header>\n<div class=\"sidebar slds-border_right\"></div>\n<div id=\"page-users\" class=\"content-wrapper slds-brand-band_large slds-col slds-template_bottom-magnet brand-band_magnetic slds-hide\">\n    <article class=\"slds-card\">\n        {{ page-header title=\"Insights\" subtitle=\"Users\"}}\n        <div class=\"slds-card__body slds-card__body_inner\">\n            <div class=\"section header-tiles slds-grid slds-gutters slds-gutters_x-small\">\n                {{header-tile title=\"All Users\" count=\"258\" delta=\"23\" helper}}\n                {{header-tile title=\"Monthly Active Users\" count=\"236\" delta=\"23\"}}\n                {{header-tile title=\"Monthly Active Mobile Users\" count=\"228\" delta=\"23\"}}\n                {{header-tile title=\"Monthly Collaborators\" count=\"199\" delta=\"23\" helper}}\n            </div>\n        </div>\n    </article>\n    {{card-users}}\n</div>\n<div id=\"page-content\" class=\"content-wrapper slds-brand-band_large slds-col slds-template_bottom-magnet brand-band_magnetic\">\n    <article class=\"slds-card\">\n        {{ page-header title=\"Insights\" subtitle=\"Content and Collaboration\"}}\n        <div class=\"slds-card__body slds-card__body_inner\">\n            <div class=\"section header-tiles slds-grid slds-gutters slds-gutters_x-small\">\n                {{header-tile title=\"All Content\" count=\"1208\" delta=\"23\"}}\n                {{header-tile title=\"Active Shared Content\" count=\"278\" delta=\"23\" helper}}\n                {{header-tile title=\"New Content\" count=\"208\" delta=\"23\"}}\n                {{header-tile title=\"Comments and Messages\" count=\"1728\" delta=\"23\" helper}}\n            </div>\n        </div>\n    </article>\n    {{card-content}}\n    {{card-embedded-docs}}\n</div>",
    "card-content": "<article class=\"slds-card\">\n  <div class=\"slds-card__header slds-grid slds-grid_align-spread\">\n    <h1 class=\"slds-page-header__title slds-m-right_small slds-truncate slds-align-middle\">Content</h1>\n    <div class=\"slds-no-flex slds-grid slds-grid_vertical-align-center\">\n      <div class=\"slds-text-color_weak slds-m-right_x-small\">Updated 1 day ago</div>\n      {{ dropdown-time }}\n      <button class=\"slds-button slds-button_neutral slds-m-left_x-small\">Export to CSV</button>\n    </div>\n  </div>\n  <div class=\"slds-card__body slds-card__body_inner slds-m-vertical_medium\">\n    <div class=\"chart-set slds-p-around_medium slds-m-top_medium\">\n      <div class=\"slds-tabs_default\">\n        <ul class=\"slds-tabs_default__nav\">\n          <li id=\"content-tab1\" class=\"slds-tabs_default__item slds-is-active\">\n            <a class=\"slds-tabs_default__link\">Content by Type</a>\n          </li>\n          <li id=\"content-tab2\" class=\"slds-tabs_default__item\">\n            <a class=\"slds-tabs_default__link\">Content by Sharing</a>\n          </li>\n        </ul>\n        <div id=\"content-tab1-content\" class=\"slds-tabs_default__content\">\n          {{chart-set id=\"content-type\"}}\n        </div>\n        <div id=\"content-tab2-content\" class=\"slds-tabs_default__content slds-hide\">\n          {{chart-set id=\"content-sharing\"}}\n        </div>\n      </div>\n    </div>\n    <div class=\"divider slds-m-bottom_large\"></div>\n    <div class=\"slds-grid slds-grid_align-spread slds-grid_vertical-align-center\">\n      <div class=\" slds-text-heading_small slds-m-vertical_medium\">Collaborative Activity</div>\n      <div class=\"slds-text-color_weak slds-m-right_x-small\">Updated 1 day ago Â· showing the past 6 months</div>\n    </div>\n    <div class=\"sparklines-wrapper slds-grid slds-gutters slds-gutters_direct-x-small\">\n      <div class=\"slds-col slds-size_1-of-3\">\n        {{sparkline-set metric=\"Comments and Messages\" count2=\"23\" submetric=\"content with five or more comments\"}}\n      </div>\n      <div class=\"slds-col slds-size_1-of-3\">\n        {{sparkline-set metric=\"Likes\" count2=\"145\" submetric=\"messages liked by multiple people\"}}\n      </div>\n      <div class=\"slds-col slds-size_1-of-3\">\n        {{sparkline-set metric=\"@Mentions\" count2=\"79\" submetric=\"unique mentions of people and content\"}}\n      </div>\n    </div>\n  </div>\n</article>",
    "card-embedded-docs": "<article class=\"slds-card slds-m-bottom_medium\" id=\"card-embedded\">\n    <div class=\"slds-card__header slds-grid slds-grid_align-spread\">\n        <h1 class=\"slds-page-header__title slds-m-right_small slds-truncate slds-align-middle\">Embedded Elements</h1>\n        <div class=\"slds-no-flex slds-grid slds-grid_vertical-align-center\">\n            <div class=\"slds-text-color_weak slds-m-right_x-small\">Updated 1 day ago</div>\n        </div>\n    </div>\n    <div class=\"slds-card__body slds-card__body_inner\">\n        <div class=\"slds-text-color_weak slds-m-bottom_medium\">A sentence about what embedded elements are, plus maybe a link to <a>manage live apps</a>.</div>\n        <div class=\"section header-tiles slds-grid slds-gutters slds-gutters_x-small slds-wrap\">\n            {{app-tile-bar type=\"first\" label=\"Built-in\" title=\"Spreadsheet\" count=\"1258\"}}\n            {{app-tile-bar type=\"first\" label=\"Built-in\" title=\"Project Tracker\" count=\"683\"}}\n            {{app-tile-bar type=\"third\" label=\"Third-Party\" title=\"Salesforce Records\" count=\"258\"}}\n            {{app-tile-bar type=\"second\" label=\"Your Company\" title=\"HQ Coffee Bot\" count=\"48\"}}\n            <div id=\"app-tile-expand\" class=\"app-tile slds-col slds-m-vertical_x-small\">\n                <div class=\"slds-box slds-grid slds-grid_align-center slds-grid_vertical-align-center\">\n                    <a>Show all 11 Elements</a>\n                </div>\n            </div>\n            {{app-tile-bar type=\"second\" label=\"Your Company\" title=\"HQ Coffee Bot\" count=\"48\" hide}}\n            {{app-tile-bar type=\"first\" label=\"Your Company\" title=\"HQ Coffee Bot\" count=\"48\" hide}}\n            {{app-tile-bar type=\"third\" label=\"Your Company\" title=\"HQ Coffee Bot\" count=\"48\" hide}}\n            {{app-tile-bar type=\"third\" label=\"Your Company\" title=\"HQ Coffee Bot\" count=\"48\" hide}}\n            {{app-tile-bar type=\"first\" label=\"Your Company\" title=\"HQ Coffee Bot\" count=\"48\" hide}}\n            {{app-tile-bar type=\"first\" label=\"Your Company\" title=\"HQ Coffee Bot\" count=\"48\" hide}}\n            {{app-tile-bar type=\"first\" label=\"Your Company\" title=\"HQ Coffee Bot\" count=\"48\" hide}}\n        </div>\n    </div>\n</article>",
    "card-embedded-empty": "<article class=\"slds-card alt-state slds-hide\">\n    <div class=\"slds-card__header slds-grid slds-grid_align-spread\">\n        <h1 class=\"slds-page-header__title slds-m-right_small slds-truncate slds-align-middle\">Empty State</h1>\n        <div class=\"slds-no-flex slds-grid slds-grid_vertical-align-center\">\n            <div class=\"slds-text-color_weak slds-m-right_x-small\">Updated 1 day ago</div>\n        </div>\n    </div>\n    <div class=\"slds-card__body slds-card__body_inner\">\n        <div class=\"chart-set chart-set-empty slds-p-around_medium slds-grid slds-grid_align-center slds-grid_vertical-align-center\">\n            <div class=\"slds-text-body_regular slds-text-color_weak slds-text-align_center slds-p-around_large\">Add your first embedded app to Quip? <a>Read more</a>.\n            </div>\n        </div>\n    </div>\n</article>",
    "card-embedded-error": "<article class=\"slds-card alt-state slds-hide\">\n    <div class=\"slds-card__header slds-grid slds-grid_align-spread\">\n        <h1 class=\"slds-page-header__title slds-m-right_small slds-truncate slds-align-middle\">{{warning}}Error State </h1>\n        <div class=\"slds-no-flex slds-grid slds-grid_vertical-align-center\">\n            <div class=\"slds-text-color_weak slds-m-right_x-small\"></div>\n        </div>\n    </div>\n    <div class=\"slds-card__body slds-card__body_inner\">\n        <div class=\"chart-set chart-set-empty slds-p-around_medium slds-grid slds-nowrap slds-grid_align-center slds-grid_vertical-align-center\">\n            <div class=\"slds-text-body_regular slds-text-color_weak slds-text-align_center slds-p-around_large\">ðWe're having issue pulling this data. Try refresh your page or come back again later.\n            </div>\n        </div>\n    </div>\n</article>",
    "card-embedded": "<article class=\"slds-card slds-m-bottom_medium\" id=\"card-embedded\">\n    <div class=\"slds-card__header slds-grid slds-grid_align-spread\">\n        <h1 class=\"slds-page-header__title slds-m-right_small slds-truncate slds-align-middle\">Embedded Elements</h1>\n        <div class=\"slds-no-flex slds-grid slds-grid_vertical-align-center\">\n            <div class=\"slds-text-color_weak slds-m-right_x-small\">Updated 1 day ago</div>\n        </div>\n    </div>\n    <div class=\"slds-card__body slds-card__body_inner\">\n        <div class=\"chart-set slds-p-vertical_medium slds-p-horizontal_none\">\n            <div class=\"slds-p-horizontal_medium slds-m-bottom_medium\">\n                <span class=\"slds-text-heading_medium\">46</span>\n                <span class=\"slds-text-heading_small slds-m-left_xx-small\">Embedded Apps {{helper}}</span>\n                <div class=\"slds-text-body_regular slds-text-color_weak slds-m-top_xx-small\"><span class=\"slds-text-color_success\">â²23%</span> over the past month. For a full list of Quip embedded apps <a>see here</a>.</div>\n            </div>\n            <div class=\"bar-container-container container-container\">\n                <div class=\"chart-container\">\n                    <canvas id=\"embedded\"></canvas>\n                </div>\n            </div>\n        </div>\n    </div>\n</article>",
    "card-users": "<article class=\"slds-card\">\n    <div class=\"slds-card__header slds-grid slds-grid_align-spread\">\n        <h1 class=\"slds-page-header__title slds-m-right_small slds-truncate slds-align-middle\">Users</h1>\n        <div class=\"slds-no-flex slds-grid slds-grid_vertical-align-center\">\n            <div class=\"slds-text-color_weak slds-m-right_x-small\">Updated 1 day ago</div>\n            {{ dropdown-time }}\n            <button class=\"slds-button slds-button_neutral slds-m-left_x-small\">Export to CSV</button>\n        </div>\n    </div>\n    <div class=\"slds-card__body slds-card__body_inner\">\n        <div class=\"chart-set slds-p-around_medium slds-m-top_medium\">\n            <div class=\"slds-tabs_default\">\n                <ul class=\"slds-tabs_default__nav\">\n                    <li id=\"users-tab1\" class=\"slds-tabs_default__item slds-is-active\">\n                        <a class=\"slds-tabs_default__link\">All Users</a>\n                    </li>\n                    <li id=\"users-tab2\" class=\"slds-tabs_default__item\">\n                        <a class=\"slds-tabs_default__link\">Monthly Active Users by Platform</a>\n                    </li>\n                </ul>\n                <div id=\"users-tab1-content\" class=\"slds-tabs_default__content\">\n                    {{chart-set id=\"users-users\"}}\n                </div>\n                <div id=\"users-tab2-content\" class=\"slds-tabs_default__content slds-hide\">\n                    {{chart-set id=\"users-platform\"}}\n                </div>\n            </div>\n        </div>\n        <div class=\"divider slds-m-vertical_medium\"></div>\n        <div class=\"slds-grid slds-grid_align-spread slds-grid_vertical-align-center\">\n            <div class=\" slds-text-heading_small slds-m-vertical_medium\">Collaborative Activity</div>\n            <div class=\"slds-text-color_weak slds-m-right_x-small\">Updated 1 day ago Â· Showing the past 6 months</div>\n        </div>\n        <div class=\"sparklines-wrapper slds-grid slds-grid_align-spread slds-gutters slds-gutters_direct-x-small\">\n            <div class=\"slds-col col-users-featured col-sparkline-featured\">\n                {{sparkline-set metric=\"Collaborators\" helper featured}}\n            </div>\n            <div class=\"slds-col col-users col-sparkline\">\n                {{sparkline-set metric=\"Viewers\"}}\n                {{sparkline-set metric=\"Commenters\"}}\n            </div>\n            <div class=\"slds-col col-users col-sparkline\">\n                {{sparkline-set metric=\"Editors\"}}\n                {{sparkline-set metric=\"Sharers\" helper}}\n            </div>\n        </div>\n    </div>\n</article>",
    "chart-set": "\n    <div class=\"chart-container-container container-container\">\n        <div class=\"chart-container\">\n            <canvas id=\"$id\"></canvas>\n        </div>\n    </div>\n",
    "dropdown-time": "<div class=\"slds-form-element\">\n    <div class=\"slds-form-element__control\">\n        <div class=\"slds-combobox_container slds-size_small\">\n            <div class=\"slds-combobox slds-dropdown-trigger slds-dropdown-trigger_click slds-combobox-picklist\" aria-expanded=\"false\" aria-haspopup=\"listbox\" role=\"combobox\">\n                <div class=\"dropdown-time slds-combobox__form-element slds-input-has-icon slds-input-has-icon_right\">\n                    <input type=\"text\" class=\"slds-input slds-combobox__input\" id=\"combobox-unique-id-26\" placeholder=\"Past 6 months\" readonly=\"\" />\n                    <span class=\"slds-icon_container slds-icon-utility-down slds-input__icon slds-input__icon_right \">\n                        <svg class=\"slds-icon slds-icon slds-icon_x-small slds-icon-text-default\">\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" id=\"down\" width=\"100%\" height=\"100%\"><path d=\"M3.8 6.5h16.4c.4 0 .8.6.4 1l-8 9.8c-.3.3-.9.3-1.2 0l-8-9.8c-.4-.4-.1-1 .4-1z\"></path></svg>\n                        </svg>\n                    </span>\n                </div>\n                <div class=\"listbox-time slds-dropdown slds-dropdown_fluid\">\n                    <ul class=\"slds-listbox slds-listbox_vertical\" role=\"presentation\">\n                        <li class=\"slds-listbox__item\">\n                            <div id=\"listbox-option-unique-id-01\" class=\"slds-media slds-listbox__option slds-listbox__option_plain slds-media_small slds-media_center\" role=\"option\">\n                                <span class=\"slds-media__body\">\n                                    <span class=\"slds-truncate\" title=\"Option A\">Past 1 month</span>\n                                </span>\n                            </div>\n                        </li>\n                                                <li class=\"slds-listbox__item\">\n                            <div id=\"listbox-option-unique-id-02\" class=\"slds-media slds-listbox__option slds-listbox__option_plain slds-media_small slds-media_center\" role=\"option\">\n                                <span class=\"slds-media__body\">\n                                    <span class=\"slds-truncate\" title=\"Option A\">Past 3 months</span>\n                                </span>\n                            </div>\n                        </li>\n                                                <li class=\"slds-listbox__item\">\n                            <div id=\"listbox-option-unique-id-01\" class=\"slds-media slds-listbox__option slds-listbox__option_plain slds-media_small slds-media_center\" role=\"option\">\n                                <span class=\"slds-media__body\">\n                                    <span class=\"slds-truncate\" title=\"Option A\">Past 6 months</span>\n                                </span>\n                            </div>\n                        </li>\n                                                </li>\n                                                <li class=\"slds-listbox__item\">\n                            <div id=\"listbox-option-unique-id-01\" class=\"slds-media slds-listbox__option slds-listbox__option_plain slds-media_small slds-media_center\" role=\"option\">\n                                <span class=\"slds-media__body\">\n                                    <span class=\"slds-truncate\" title=\"Option A\">Past 12 months</span>\n                                </span>\n                            </div>\n                        </li>\n                    </ul>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>",
    "glyph-calendar": "<div class=\"slds-icon_container app-glyph\">\n\t<svg viewBox=\"0 0 18 18\" preserveAspectRatio=\"xMidYMid\" class=\"\" style=\"display: block;\">\n        <g>\n            <path d=\"M15.5,17H2.5A1.5,1.5,0,0,1,1,15.5V2.5A1.5,1.5,0,0,1,2.5,1H4V2.5a1.5,1.5,0,0,0,3,0V1h4V2.5a1.5,1.5,0,0,0,3,0V1h1.5A1.5,1.5,0,0,1,17,2.5v13A1.5,1.5,0,0,1,15.5,17ZM16,6H2v9.5a0.5,0.5,0,0,0,.5.5h13a0.5,0.5,0,0,0,.5-0.5V6ZM12.51,3a0.557,0.557,0,0,1-.5-0.6V0.6a0.508,0.508,0,1,1,1,0V2.4A0.557,0.557,0,0,1,12.51,3Zm-7,0a0.557,0.557,0,0,1-.5-0.6V0.6a0.557,0.557,0,0,1,.5-0.6,0.557,0.557,0,0,1,.5.6V2.4A0.557,0.557,0,0,1,5.509,3Z\"></path>\n        </g>\n    </svg>\n</div>",
    "header-tile": "<div class=\"header-tile slds-col slds-size_1-of-4 slds-m-vertical_x-small\">\n\t<div class=\"header-set slds-p-around_medium\">\n    <div class=\"text-heading_x-large\">$count</div>\n    <div class=\"slds-text-body_regular slds-text-heading_small\">$title{{if helper}} {{helper}} {{end helper}}</div> \n    <div class=\"slds-text-body_regular slds-text-color_weak slds-m-top_small\"> <span class=\"slds-text-color_success\">â²$delta%</span> over the past month</div>\n</div>\n</div>",
    "helper": "<span class=\"slds-icon_container helper\"><svg class=\"slds-icon_xx-small\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" id=\"info\" width=\"100%\" height=\"100%\"><path d=\"M12 .9C5.9.9.9 5.9.9 12s5 11.1 11.1 11.1 11.1-5 11.1-11.1S18.1.9 12 .9zm0 5.6c.8 0 1.4.6 1.4 1.4s-.6 1.4-1.4 1.4-1.4-.6-1.4-1.4.6-1.4 1.4-1.4zm2.3 9.7c0 .2-.2.4-.5.4h-3.6c-.3 0-.5-.1-.5-.4v-.9c0-.3.2-.5.5-.5.2 0 .4-.2.4-.4v-1.9c0-.2-.2-.5-.4-.5-.3 0-.5-.1-.5-.4v-.9c0-.3.2-.5.5-.5h2.7c.3 0 .5.2.5.5v3.7c0 .2.2.4.4.4.3 0 .5.2.5.5v.9z\"></path></svg></span>",
    "page-header": "<div class=\"slds-page-header\">\n    <div class=\"slds-page-header__row\">\n        <div class=\"slds-page-header__col-title\">\n            <div class=\"slds-media\">\n                <div class=\"slds-media__figure\"><span class=\"slds-icon_container slds-icon-custom-custom90\"><svg aria-hidden=\"true\" class=\"slds-icon slds-icon-text-default\" style=\"fill: rgb(255, 255, 255);\">\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" id=\"metrics\" width=\"100%\" height=\"100%\">\n                                <path d=\"M17.3 5.3H6.7c-.8 0-1.4.6-1.4 1.4v10.6c0 .8.6 1.4 1.4 1.4h10.6c.8 0 1.4-.6 1.4-1.4V6.7c0-.8-.6-1.4-1.4-1.4zM9.1 15.8c0 .3-.2.5-.5.5h-.4c-.3 0-.5-.2-.5-.5v-2.6c0-.3.2-.5.5-.5h.4c.3 0 .5.2.5.5v2.6zm2.4 0c0 .3-.2.5-.5.5h-.4c-.3 0-.5-.2-.5-.5V9.6c0-.3.2-.5.5-.5h.4c.3 0 .5.2.5.5v6.2zm2.4 0c0 .3-.2.5-.5.5H13c-.3 0-.5-.2-.5-.5V8.2c0-.3.2-.5.5-.5h.4c.3 0 .5.2.5.5v7.6zm2.4 0c0 .3-.2.5-.5.5h-.4c-.3 0-.5-.2-.5-.5v-4.5c0-.3.2-.5.5-.5h.4c.3 0 .5.2.5.5v4.5z\"></path>\n                            </svg>\n                        </svg><!-- react-text: 129 -->\n                        <!-- /react-text --></span><!-- react-text: 130 -->\n                    <!-- /react-text -->\n                </div>\n                <div class=\"slds-media__body\">\n                    <div>\n                        <p class=\"slds-text-title_caps slds-line-height_reset\">$title</p>\n                        <h1 class=\"slds-page-header__title slds-m-right_small slds-truncate slds-align-middle\" title=\"Integrations\">$subtitle</h1>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class=\"slds-no-flex slds-grid slds-grid_vertical-align-center\">\n            \n        </div>\n    </div>\n</div>",
    "sparkline-set": "<div class=\"sparkline-set slds-col slds-p-vertical_medium slds-p-horizontal_none slds-m-top_medium {{if featured}}featured{{end featured}}\">\n  <div class=\"slds-p-horizontal_medium\">\n    <div>\n      <span class=\"slds-text-heading_medium\">697</span>\n      <span class=\"slds-text-heading_small slds-m-left_xx-small\">$metric</span>\n      {{if helper}}{{helper}}{{end helper}}\n    </div>\n    <div class=\"slds-text-body_regular slds-text-color_weak slds-m-top_xx-small\"> <span class=\"slds-text-color_success\">â²23%</span> over the past month</div>\n  </div>\n  <!-- <div class=\"placeholder-sparkline\"></div> -->\n  <div class=\"sparkline-container-container container-container\">\n    <div class=\"sparkline-container\">\n      <canvas class=\"sparkline\"></canvas>\n    </div>\n  </div>\n  <div class=\"slds-p-horizontal_medium\">\n    {{if submetric}}\n    <div class=\"slds-text-body_regular slds-m-top_medium\">\n      $count2\n      <span class=\"slds-text-color_weak\"> $submetric</span>\n    </div>\n    {{end submetric}}\n  </div>\n  {{if featured}}\n  <div class=\"whitespace\"></div>\n  <div class=\"slds-p-horizontal_medium\">\n    <div class=\"sparkline-description slds-text-body_small slds-text-color_weak\">A brief explanation of how \"collaborators\" are defined and why you should care about it.</div>\n  </div>\n  {{end featured}}\n</div>",
    "warning": "<span class=\"slds-icon_container warning\"><svg class=\"slds-icon_xx-small\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" id=\"warning\" width=\"100%\" height=\"100%\"><path d=\"M23.7 19.6L13.2 2.5c-.6-.9-1.8-.9-2.4 0L.3 19.6c-.7 1.1 0 2.6 1.1 2.6h21.2c1.1 0 1.8-1.5 1.1-2.6zM12 18.5c-.8 0-1.4-.6-1.4-1.4s.6-1.4 1.4-1.4 1.4.6 1.4 1.4-.6 1.4-1.4 1.4zm1.4-4.2c0 .3-.2.5-.5.5h-1.8c-.3 0-.5-.2-.5-.5v-6c0-.3.2-.5.5-.5h1.8c.3 0 .5.2.5.5v6z\"></path></svg></span>\n\n"
},
    json: {"data":{}},
    config: {"title":"analytics"},
    variation: 0,

    onLoad: (fn) => {
        Jetski.onLoads.push(fn)
    },

    checkForUpdate: () => {
        if (!Jetski.auto_refresh) return
        fetch('http://localhost:8601')
            .then(response => response.text())
            .then(contents => {
                if (!Jetski.last_updated) {
                    Jetski.last_updated = contents
                } else if (Jetski.last_updated != contents) {
                    window.location.reload()
                }
            }
        )
    },

    importAll: () => {
        document.querySelectorAll("script[data-jetski-import]").forEach(tag => {
            let wrapContent = document.getElementById(tag.dataset.jetskiTemplate).innerHTML
            let onloadFn =
                "this.style.height = this.contentWindow.document.body.scrollHeight + \'px\';" +
                "this.contentWindow.document.body.style.margin = 0;" +
                "this.contentWindow.document.body.style.padding = 0;" +
                "this.style.opacity = 1"
            tag.outerHTML = '<iframe src="http://quip.design/' + encodeURI(tag.dataset.jetskiImport) + '" frameBorder="0" width="100%" onload="' + onloadFn + '" style="opacity: 0;"></iframe>'

            /*fetch("http://quip.design/" + encodeURI(tag.dataset.jetskiImport))
                .then(response => response.text())
                .then(markup => {
                    // TODO: Incorporate wrapContent
                    tag.outerHTML = markup
                })
            */
        })
    },

    findAncestor: (element, className) => {
        while ((element = element.parentElement) && !element.classList.contains(className)) {}
        return element
    },

    renderLayout: (layoutName, parameters) => {
        let markup = Jetski_Parser.markupForLayout(layoutName, parameters || [], Jetski.layouts, Jetski.config)

        Jetski.config[Jetski_Const.Syntax.YIELD_CONTENT] = parameters[Jetski_Const.Syntax.YIELD_CONTENT]
        return Jetski_Parser.resolveAllTokens(markup, Jetski.layouts, Jetski.variation, Jetski.config)
    }
}

window.addEventListener('load', () => {
    Jetski.importAll()
    Jetski.onLoads.forEach(fn => fn())
    Jetski.checkForUpdate()
    if (Jetski.auto_refresh) {
        setInterval(() => {
            Jetski.checkForUpdate()
        }, 3000)
    }
})
